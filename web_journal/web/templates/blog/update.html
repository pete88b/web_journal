{% extends 'base.html' %}

{% block header %}
  {# <h1>{% block title %}Edit "{{ post['title'] }}"{% endblock %}</h1> #}
{% endblock %}

{% block content %}
  <form method="post">
    <label class="optional-label" for="title">Title</label>
    <input name="title" id="title" value="{{ request.form['title'] or post['title'] }}" required
           placeholder="Everey entry need a title" autofocus>
    <label class="optional-label" for="body">Body</label>
    <textarea name="body" id="body">{{ request.form['body'] or post['body'] }}</textarea>
    <input type="submit" value="Save" class="main-submit">
  </form>
  <hr>
  <form action="{{ url_for('blog.delete', id=post['id']) }}" method="post">
    <!--  
    add a quick undo delete
    onclick="return confirm('Are you sure?');"
    -->
    <input class="danger" type="submit" value="Delete">
  </form>
  <script>
    function resizeOnInput() {
      this.style.height = 'auto';
      this.style.height = (this.scrollHeight) + 'px';
    }
    const textareas = document.getElementsByTagName('textarea');
    for (let i = 0; i < textareas.length; i++) {
      textarea=textareas[i]
      textarea.setAttribute('style', 'height:' + (textarea.scrollHeight) + 'px; overflow-y:hidden;');
      textarea.addEventListener('input', resizeOnInput, false);
    }
  </script>
{% endblock %}
